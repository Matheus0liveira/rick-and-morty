{"ast":null,"code":"import React from \"react\";\nvar __jsx = React.createElement;\nimport { useState, useRef, useEffect } from 'react';\nimport Link from 'next/link';\nimport Router, { useRouter } from 'next/router';\nimport Lottie from 'react-lottie';\nimport { FiSearch, FiArrowLeft, FiArrowRight, FiHeart } from 'react-icons/fi';\nimport StyledMain, { Text, Description, StyledButton, StyledArrowDown, StyledProfiles, InputSearch, Box, Line, SectionCards, CountPages } from './styles';\nimport { Container } from '../../assets/globalStyles';\nimport SwipeDown from '../../../public/swipeDown.json';\nimport Loading from '../../../public/loading.json';\nimport Card from '../../compoenents/Card';\nimport api from '../../api/profiles';\n\nconst scrollToRef = ref => window.scrollTo(0, ref.current.offsetTop);\n\nfunction Home({\n  data,\n  params\n}) {\n  const {\n    0: dataPerson,\n    1: setDataPerson\n  } = useState(data);\n  const {\n    0: showDescrition,\n    1: setShowDescription\n  } = useState(false);\n  const {\n    0: page,\n    1: setPage\n  } = useState(Number(params.id));\n  const {\n    0: loading,\n    1: setLoading\n  } = useState(true);\n  const searchRef = useRef(null);\n  const router = useRouter();\n  const myScroll = useRef(null);\n\n  const executeScroll = () => scrollToRef(myScroll);\n\n  const SwipeDownAnimation = {\n    loop: true,\n    autoplay: true,\n    animationData: SwipeDown,\n    rendererSettings: {\n      preserveAspectRatio: 'xMidYMid slice'\n    }\n  };\n  const LoadingAnimation = {\n    loop: true,\n    autoplay: true,\n    animationData: Loading,\n    rendererSettings: {\n      preserveAspectRatio: 'xMidYMid slice'\n    }\n  }; // useEffect(() => {\n  //   if (page >= 2) {\n  //     executeScroll();\n  //   }\n  // }, [page]);\n\n  const handleSubmit = event => {\n    event.preventDefault();\n    console.log(searchRef.current.value);\n  };\n\n  const handleMoveToNextPage = () => {\n    if (dataPerson.info.next !== null) {\n      const nextPage = dataPerson.info.next.split('page=')[1];\n      router.push(`${nextPage}`);\n      console.log(nextPage);\n    }\n  };\n\n  const handleMoveToPrevPage = () => {\n    setPage(prevState => prevState - 1);\n\n    if (dataPerson.info.prev !== null) {\n      const prevPage = dataPerson.info.prev.split('page=')[1];\n      router.push(`${prevPage}`);\n    }\n  };\n\n  Router.events.on('routeChangeStart', () => {\n    if (dataPerson.info.next !== null) {\n      setLoading(false);\n    }\n  });\n  Router.events.on('routeChangeComplete', () => {\n    if (dataPerson.info.next !== null) {\n      setLoading(true);\n      executeScroll();\n    }\n  });\n  return __jsx(React.Fragment, null, __jsx(StyledMain, null, __jsx(Container, null, __jsx(\"img\", {\n    src: \"/rick.svg\",\n    alt: \"\"\n  }), __jsx(Text, null, \"Rick and Morty\"), __jsx(Description, {\n    showDescrition: showDescrition\n  }, \"A s\\xE9rie mostra as aventuras ins\\xF3litas do cientista beberr\\xE3o Rick Sanchez e seu neto inseguro e com horm\\xF4nios em ebuli\\xE7\\xE3o Morty Smith, membros de uma fam\\xEDlia americana comum, composta tamb\\xE9m por Jerry, um pai ignorante; Beth, uma m\\xE3e sensata e Summer, uma irm\\xE3 mais velha, t\\xEDpica adolescente alienada, que se compadece do irm\\xE3o quando passa a integrar as aventuras de seu av\\xF4.\"), __jsx(StyledButton, {\n    onClick: () => setShowDescription(!showDescrition),\n    about: \"true\"\n  }, !showDescrition ? 'SOBRE' : 'ESCONDER'), __jsx(StyledArrowDown, null, __jsx(Lottie, {\n    isClickToPauseDisabled: true,\n    options: SwipeDownAnimation,\n    height: 80,\n    width: 80\n  })))), __jsx(StyledProfiles, null, __jsx(Box, null), __jsx(Container, null, __jsx(\"div\", {\n    ref: myScroll\n  }, __jsx(Text, {\n    person: \"true\"\n  }, \"Personagens\"), __jsx(Line, null)), __jsx(InputSearch, {\n    onSubmit: handleSubmit\n  }, __jsx(\"input\", {\n    ref: searchRef,\n    type: \"text\",\n    placeholder: \"Pesquisar\"\n  }), __jsx(StyledButton, {\n    type: \"submit\",\n    search: \"true\"\n  }, __jsx(FiSearch, null)))), __jsx(Container, null, __jsx(SectionCards, null, loading ? __jsx(Card, {\n    results: dataPerson.results\n  }) : __jsx(Lottie, {\n    isClickToPauseDisabled: true,\n    options: LoadingAnimation,\n    height: 80,\n    width: 80\n  }))), __jsx(Container, null, __jsx(CountPages, null, __jsx(StyledButton, {\n    countPage: \"true\",\n    onClick: handleMoveToPrevPage\n  }, \" \", __jsx(FiArrowLeft, null), \" Prev\"), __jsx(Text, {\n    count: \"true\"\n  }, \"01\"), __jsx(StyledButton, {\n    countPage: \"true\",\n    onClick: handleMoveToNextPage\n  }, \"Next \", __jsx(FiArrowRight, null)))), __jsx(Text, {\n    footer: \"true\"\n  }, \"Created By: \", __jsx(\"a\", {\n    target: \"_blank\",\n    href: \"https://github.com/Matheus0liveira\"\n  }, \" Matheus Oliveira \", __jsx(\"span\", null, __jsx(FiHeart, null), \" \"), \" \"))), __jsx(\"footer\", null));\n}\n\n;\nexport async function getStaticProps({\n  params\n}) {\n  const {\n    data\n  } = await api.get(`/character?page=${params.id}`);\n  return {\n    props: {\n      data,\n      params\n    }\n  };\n}\nexport async function getStaticPaths() {\n  return {\n    paths: [{\n      params: {\n        id: '1'\n      }\n    }, {\n      params: {\n        id: '2'\n      }\n    }, {\n      params: {\n        id: '3'\n      }\n    }, {\n      params: {\n        id: '4'\n      }\n    }, {\n      params: {\n        id: '5'\n      }\n    }, {\n      params: {\n        id: '6'\n      }\n    }, {\n      params: {\n        id: '7'\n      }\n    }, {\n      params: {\n        id: '8'\n      }\n    }, {\n      params: {\n        id: '9'\n      }\n    }, {\n      params: {\n        id: '10'\n      }\n    }, {\n      params: {\n        id: '11'\n      }\n    }, {\n      params: {\n        id: '12'\n      }\n    }, {\n      params: {\n        id: '13'\n      }\n    }, {\n      params: {\n        id: '14'\n      }\n    }, {\n      params: {\n        id: '15'\n      }\n    }, {\n      params: {\n        id: '16'\n      }\n    }, {\n      params: {\n        id: '17'\n      }\n    }, {\n      params: {\n        id: '18'\n      }\n    }, {\n      params: {\n        id: '19'\n      }\n    }, {\n      params: {\n        id: '20'\n      }\n    }, {\n      params: {\n        id: '21'\n      }\n    }, {\n      params: {\n        id: '22'\n      }\n    }, {\n      params: {\n        id: '23'\n      }\n    }, {\n      params: {\n        id: '24'\n      }\n    }, {\n      params: {\n        id: '25'\n      }\n    }, {\n      params: {\n        id: '26'\n      }\n    }, {\n      params: {\n        id: '27'\n      }\n    }, {\n      params: {\n        id: '28'\n      }\n    }, {\n      params: {\n        id: '29'\n      }\n    }, {\n      params: {\n        id: '30'\n      }\n    }, {\n      params: {\n        id: '31'\n      }\n    }, {\n      params: {\n        id: '32'\n      }\n    }, {\n      params: {\n        id: '33'\n      }\n    }, {\n      params: {\n        id: '34'\n      }\n    }],\n    fallback: false\n  };\n}\n;\nexport default Home;","map":null,"metadata":{},"sourceType":"module"}